<?xml version="1.0" encoding="UTF-8"?>
<odoo>
    <data>
        <!-- Add Print Invoice button in header -->
        <record id="view_move_form_print_invoice_button" model="ir.ui.view">
            <field name="name">account.move.form.print.invoice.button</field>
            <field name="model">account.move</field>
            <field name="inherit_id" ref="account.view_move_form"/>
            <field name="arch" type="xml">
                <xpath expr="//header/button[@name='action_post']" position="after">
                    <button name="action_print_empty_invoice" 
                            string="Print Invoice" 
                            type="object" 
                            class="btn-primary"
                            groups="account.group_account_invoice"/>
                </xpath>
            </field>
        </record>

        <!-- Add Bank Information in Settings -->
        <record id="res_config_settings_view_form_bank_info" model="ir.ui.view">
            <field name="name">res.config.settings.view.form.inherit.bank.info</field>
            <field name="model">res.config.settings</field>
            <field name="inherit_id" ref="account.res_config_settings_view_form"/>
            <field name="arch" type="xml">
                <xpath expr="//setting[@id='use_invoice_terms']" position="after">
                    <setting id="bank_information_setting" string="Bank Information">
                        <field name="invoice_bank_info" placeholder="Bank information..."/>
                    </setting>
                </xpath>
            </field>
        </record>

        <!-- Hide standard Odoo narration field -->
        <record id="view_move_form_hide_default_terms" model="ir.ui.view">
            <field name="name">account.move.form.hide.default.terms</field>
            <field name="model">account.move</field>
            <field name="inherit_id" ref="account.view_move_form"/>
            <field name="arch" type="xml">
                <field name="narration" position="attributes">
                    <attribute name="invisible">1</attribute>
                </field>
            </field>
        </record>

        <!-- Add Bank Information and Terms & Conditions fields -->
        <record id="view_move_form_bank_and_terms" model="ir.ui.view">
            <field name="name">account.move.form.bank.and.terms</field>
            <field name="model">account.move</field>
            <field name="inherit_id" ref="account.view_move_form"/>
            <field name="arch" type="xml">
                <xpath expr="//field[@name='invoice_line_ids']" position="after">
                    <div class="row" invisible="not default_bank">
                        <div class="col-12">
                            <h5>Bank Information</h5>
                            <field name="default_bank" widget="html" readonly="0" options="{'collaborative': false}"/>
                        </div>
                    </div>
                    <div class="row" invisible="not terms_conditions" style="margin-top: 10px;">
                        <div class="col-12">
                            <h5>Terms and Conditions</h5>
                            <field name="terms_conditions" widget="html" readonly="0" options="{'collaborative': false}"/>
                        </div>
                    </div>
                </xpath>
            </field>
        </record>
    </data>
</odoo>
